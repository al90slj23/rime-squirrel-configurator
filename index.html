<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rime 管须鼠可视化配置器 v1.0（.custom.yaml 生成器）</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg" />
<script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<!-- 主题切换按钮 -->
<button class="theme-toggle" id="themeToggle" aria-label="切换主题">
  <span id="themeIcon">🌙</span>
</button>

<div class="wrap">
  <h1>Rime 可视化配置器 <span class="badge">生成 *.custom.yaml</span><span class="badge" style="margin-left:8px">v1.2</span></h1>

  <div class="card">
    <div class="grid">
      <div class="section">
        <h2>方案（Schema）</h2>
        <div style="margin-bottom:8px">
          <div class="label-text" style="margin-bottom:8px">方案标识（文件前缀）</div>
          <input id="schemaId" type="text" value="luna_pinyin" placeholder="例如: luna_pinyin" style="width:100%;max-width:100%" />
        </div>
        <div class="muted">生成的文件名：<code id="outName">luna_pinyin.custom.yaml</code></div>
      </div>

      <div class="section">
        <h2>默认字形</h2>
        <div class="radio-wrap">
          <label><input type="radio" name="simp" value="simp" checked /> 默认简体</label>
          <label><input type="radio" name="simp" value="trad" /> 默认繁体</label>
        </div>
        <div class="muted" style="margin-top:12px">热键切换：<code>Control+Shift+F</code></div>
      </div>

      <div class="section">
        <h2>输入模式</h2>
        <label>
          <input class="switch" id="asciiMode" type="checkbox" checked />
          <span class="label-text">默认「中文模式」</span>
          <span class="badge">关闭=西文</span>
        </label>
        <label>
          <input class="switch" id="fullShape" type="checkbox" />
          <span class="label-text">默认「全角」</span>
          <span class="badge">建议关闭</span>
        </label>
        <label>
          <input class="switch" id="asciiPunct" type="checkbox" checked />
          <span class="label-text">默认「中文标点」</span>
        </label>
      </div>

      <div class="section">
        <h2>快捷键配置</h2>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px">
          <div class="label-text" style="flex-shrink:0">快捷键风格</div>
          <div class="radio-wrap" style="gap:12px">
            <label style="margin:0"><input type="radio" name="hotkeyStyle" value="windows" checked /> Windows</label>
            <label style="margin:0"><input type="radio" name="hotkeyStyle" value="macos" /> macOS</label>
            <label style="margin:0"><input type="radio" name="hotkeyStyle" value="custom" /> 自定义</label>
          </div>
        </div>

        <div style="margin-bottom:16px">
          <div class="label-text" style="margin-bottom:8px">切换输入法</div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="hotkeySwitch" type="text" value="Control+Shift" placeholder="Control+Shift" style="flex:1" />
            <button class="record-btn" data-target="hotkeySwitch" style="padding:10px 16px;white-space:nowrap">录制</button>
          </div>
          <div class="muted" style="margin-top:4px">轮换切换不同的输入方案</div>
        </div>

        <div style="margin-bottom:16px">
          <div class="label-text" style="margin-bottom:8px">中英文切换</div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="hotkeyAscii" type="text" value="Shift_L" placeholder="Shift_L" style="flex:1" />
            <button class="record-btn" data-target="hotkeyAscii" style="padding:10px 16px;white-space:nowrap">录制</button>
          </div>
          <div class="muted" style="margin-top:4px">在中文和英文模式之间切换</div>
        </div>

        <div style="margin-bottom:16px">
          <div class="label-text" style="margin-bottom:8px">大小写切换</div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="hotkeyCapsLock" type="text" value="Caps_Lock" placeholder="Caps_Lock" style="flex:1" />
            <button class="record-btn" data-target="hotkeyCapsLock" style="padding:10px 16px;white-space:nowrap">录制</button>
          </div>
          <div class="muted" style="margin-top:4px">切换大小写锁定</div>
        </div>

        <div style="margin-bottom:16px">
          <div class="label-text" style="margin-bottom:8px">全角半角切换</div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="hotkeyFullShape" type="text" value="Control+space" placeholder="Control+space" style="flex:1" />
            <button class="record-btn" data-target="hotkeyFullShape" style="padding:10px 16px;white-space:nowrap">录制</button>
          </div>
          <div class="muted" style="margin-top:4px">在全角和半角字符之间切换</div>
        </div>

        <div style="margin-bottom:8px">
          <div class="label-text" style="margin-bottom:8px">简繁切换</div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="hotkey" type="text" value="Control+Shift+F" placeholder="Control+Shift+F" style="flex:1" />
            <button class="record-btn" data-target="hotkey" style="padding:10px 16px;white-space:nowrap">录制</button>
          </div>
          <div class="muted" style="margin-top:4px">在简体和繁体之间切换</div>
        </div>

        <div class="muted" style="margin-top:12px;padding:8px;background:var(--input-bg);border-radius:4px">
          💡 提示：点击"录制"按钮后按下快捷键，或手动输入。多组热键用逗号分隔。
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 style="margin:0 0 24px">候选词设置</h2>
    <div class="grid">
      <div class="section">
        <h2>页面显示</h2>
        <label>
          <span class="label-text">每页候选词数量</span>
          <input id="pageSize" type="number" min="1" max="10" value="6" style="max-width:100px" />
        </label>
        <div class="muted">建议值：5-9 个</div>
      </div>

      <div class="section">
        <h2>候选词标签</h2>
        <div class="radio-wrap">
          <label><input type="radio" name="selectLabels" value="number" checked /> 数字标签（1 2 3）</label>
          <label><input type="radio" name="selectLabels" value="custom" /> 自定义标签</label>
        </div>
        <label id="customLabelsWrap" style="margin-top:12px;display:none">
          <span class="label-text">自定义标签</span>
          <input id="customLabels" type="text" placeholder="例如: a s d f g h j k l" />
        </label>
        <div class="muted" style="margin-top:8px">数字标签显示为 ①②③... 或 1 2 3...</div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 style="margin:0 0 24px">高级设置</h2>
    <div class="grid">
      <div class="section">
        <h2>ASCII 模式</h2>
        <label>
          <input class="switch" id="asciiComposer" type="checkbox" checked />
          <span class="label-text">启用 good_old_caps_lock</span>
          <span class="badge">推荐开启</span>
        </label>
        <div class="muted">Caps Lock 传统行为（大写锁定）</div>
      </div>

      <div class="section">
        <h2>识别器模式</h2>
        <label>
          <input class="switch" id="enableEmail" type="checkbox" checked />
          <span class="label-text">邮箱识别</span>
        </label>
        <label>
          <input class="switch" id="enableUrl" type="checkbox" checked />
          <span class="label-text">URL 识别</span>
        </label>
        <label>
          <input class="switch" id="enableUppercase" type="checkbox" checked />
          <span class="label-text">大写字母识别</span>
        </label>
        <div class="muted">自动识别并直接输出特殊格式</div>
      </div>
    </div>

    <div class="grid" style="margin-top:24px">
      <div class="section">
        <h2>标点符号</h2>
        <label>
          <input class="switch" id="enablePunctuator" type="checkbox" checked />
          <span class="label-text">启用标点符号候选</span>
          <span class="badge">推荐开启</span>
        </label>
        <div class="muted">输入 [ / ; 等符号时显示候选框（全角/半角切换）</div>
      </div>

      <div class="section">
        <h2>其他开关</h2>
        <label>
          <input class="switch" id="enableEmoji" type="checkbox" />
          <span class="label-text">启用 Emoji 输入</span>
        </label>
        <label>
          <input class="switch" id="enableLunar" type="checkbox" />
          <span class="label-text">显示农历日期</span>
        </label>
        <label>
          <input class="switch" id="enableSymbols" type="checkbox" checked />
          <span class="label-text">启用符号输入</span>
          <span class="badge">推荐</span>
        </label>
        <div class="muted">启用后会自动生成相应的词库和脚本文件。符号输入包括：≈ ≠ ≤ ≥ → ← 等</div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 style="margin:0 0 24px">🎨 鼠须管皮肤配置 <span class="badge">squirrel.custom.yaml</span></h2>
    <div class="grid">
      <div class="section">
        <h2>配色方案</h2>
        <label>
          <span class="label-text">浅色模式主题</span>
          <select id="colorScheme" style="flex:1;min-width:200px;max-width:400px;background:var(--input-bg);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);font-size:14px;cursor:pointer">
            <option value="lost_temple" selected>孤寺 Lost Temple</option>
            <option value="google">Google</option>
            <option value="native">系统原生</option>
            <option value="aqua">碧水 Aqua</option>
            <option value="azure">青天 Azure</option>
            <option value="luna">明月 Luna</option>
            <option value="ink">墨池 Ink</option>
            <option value="dark_temple">暗堂 Dark Temple</option>
            <option value="starcraft">星际争霸 StarCraft</option>
            <option value="clean_white">纯白 Clean White</option>
            <option value="apathy">冷漠 Apathy</option>
            <option value="dust">微尘 Dust</option>
            <option value="solarized_rock">Solarized Rock</option>
            <option value="solarized_light">Solarized Light</option>
          </select>
        </label>
        <label>
          <span class="label-text">深色模式主题</span>
          <select id="colorSchemeDark" style="flex:1;min-width:200px;max-width:400px;background:var(--input-bg);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);font-size:14px;cursor:pointer">
            <option value="dark_temple">暗堂 Dark Temple</option>
            <option value="mojave_dark">Mojave Dark</option>
            <option value="solarized_dark">Solarized Dark</option>
            <option value="ink">墨池 Ink</option>
            <option value="purity_of_form">Purity of Form</option>
            <option value="starcraft">星际争霸 StarCraft</option>
            <option value="google">Google</option>
            <option value="apathy">冷漠 Apathy</option>
          </select>
        </label>
        <div class="muted">系统外观切换时自动使用对应主题</div>
      </div>

      <div class="section">
        <h2>候选窗口布局</h2>
        <div class="radio-wrap">
          <label><input type="radio" name="candidateLayout" value="linear" checked /> 横向排列</label>
          <label><input type="radio" name="candidateLayout" value="stacked" /> 纵向排列</label>
        </div>
        <label style="margin-top:12px">
          <input class="switch" id="inlinePreedit" type="checkbox" checked />
          <span class="label-text">单行模式 (inline_preedit)</span>
        </label>
        <div class="muted">横向排列更紧凑，纵向排列更清晰</div>
      </div>
    </div>

    <div class="grid" style="margin-top:24px">
      <div class="section">
        <h2>字体设置</h2>
        <label>
          <span class="label-text">主字体</span>
          <input id="fontFace" type="text" value="PingFangSC" placeholder="PingFangSC, Hiragino Sans GB" />
        </label>
        <label>
          <span class="label-text">字体大小</span>
          <input id="fontSize" type="number" min="10" max="36" value="16" style="max-width:100px" />
        </label>
        <div class="muted">常用字体：PingFangSC, STHeiti, Hiragino Sans GB</div>
      </div>

      <div class="section">
        <h2>窗口外观</h2>
        <label>
          <span class="label-text">圆角半径</span>
          <input id="cornerRadius" type="number" min="0" max="20" value="5" style="max-width:100px" />
        </label>
        <label>
          <span class="label-text">行间距</span>
          <input id="lineSpacing" type="number" min="0" max="20" value="5" style="max-width:100px" />
        </label>
        <label>
          <span class="label-text">候选词间距</span>
          <input id="spacing" type="number" min="0" max="20" value="8" style="max-width:100px" />
        </label>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>载入现有配置（可选）</h2>
    <div id="drop" class="drop">
      <div style="font-size:16px;margin-bottom:8px">📁 拖拽 <code>*.custom.yaml</code> 文件到此处</div>
      <div class="muted">自动解析并填充配置选项</div>
    </div>
  </div>

  <div class="card">
    <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:16px">
      <h2 style="margin:0">生成的 YAML 预览</h2>
      <div style="display:flex;gap:8px">
        <button id="btnGenSchema">⬇ 生成方案配置</button>
        <button id="btnGenSquirrel">⬇ 生成皮肤配置</button>
      </div>
    </div>
    <div class="radio-wrap" style="margin-bottom:16px">
      <label><input type="radio" name="previewType" value="schema" checked /> 方案配置预览</label>
      <label><input type="radio" name="previewType" value="squirrel" /> 皮肤配置预览</label>
    </div>
    <textarea id="preview" readonly></textarea>
    <div class="hint">
      <strong>部署说明：</strong>
      <div style="margin-top:8px">
        <strong>方式 1：</strong>将下载的文件放入 <code>~/Library/Rime/</code> 目录，然后在「鼠须管」菜单中点击「重新部署」。
      </div>
      <div style="margin-top:8px">
        <strong>方式 2：</strong>命令行快速部署
        <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
          <code id="deployCmd" style="flex:1;padding:8px 12px;cursor:pointer;user-select:all">/Library/Input\ Methods/Squirrel.app/Contents/MacOS/Squirrel --reload</code>
          <button id="copyCmd" style="padding:8px 16px;font-size:12px">📋 复制</button>
        </div>
      </div>
    </div>
  </div>
</div>

</div>
<script src="app.js"></script>
</body>
</html>
